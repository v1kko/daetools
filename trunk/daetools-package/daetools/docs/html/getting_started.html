
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Getting Started with DAE Tools &mdash; DAE Tools Project 1.3.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/[d][a][e].ico"/>
    <link rel="top" title="DAE Tools Project 1.3.1 documentation" href="index.html" />
    <link rel="next" title="6. pyDAE User Guide" href="pyDAE_user_guide.html" />
    <link rel="prev" title="4. Getting DAE Tools" href="getting_daetools.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyDAE_user_guide.html" title="6. pyDAE User Guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="getting_daetools.html" title="4. Getting DAE Tools"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">DAE Tools Project 1.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started-with-dae-tools">
<h1>5. Getting Started with DAE Tools<a class="headerlink" href="#getting-started-with-dae-tools" title="Permalink to this headline">¶</a></h1>
<p>This chapter gives the basic information about what is needed to develop a model of a process, how to simulate/optimize
it and how to obtain and plot the results of a process simulation/optimization. In general, the simulation/optimization
of a process consists of three tasks:</p>
<ol class="arabic simple">
<li>Modelling of a proces</li>
<li>Defining a simulation/optimization</li>
<li>Processing the results</li>
</ol>
<div class="section" id="running-tutorials">
<h2>5.1. Running tutorials<a class="headerlink" href="#running-tutorials" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Start <tt class="docutils literal"><span class="pre">daePlotter</span></tt>:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>GNU/Linux:</li>
</ul>
<blockquote>
<div><p>Run <tt class="docutils literal"><span class="pre">Applications/Programming/daePlotter</span></tt> from the system menu or execute the following shell command:</p>
<div class="highlight-bash"><div class="highlight"><pre>daeplotter
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>MacOS:</li>
</ul>
<blockquote>
<div><p>Execute the following shell command:</p>
<div class="highlight-bash"><div class="highlight"><pre>daeplotter
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Windows:</li>
</ul>
<blockquote>
<div>Run <tt class="docutils literal"><span class="pre">Start/Programs/DAE</span> <span class="pre">Tools/daePlotter</span></tt> from the Start menu.</div></blockquote>
<p>The <tt class="docutils literal"><span class="pre">daePlotter</span></tt> main window should appear (given in <a class="reference internal" href="#figure-1"><em>daePlotter main window.</em></a>)</p>
<blockquote>
<div><div class="figure align-center" id="figure-1" style="width: 300pt">
<img alt="_images/Screenshot-DAEPlotter.png" src="_images/Screenshot-DAEPlotter.png" style="width: 250pt;" />
<p class="caption">daePlotter main window.</p>
</div>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Start <tt class="docutils literal"><span class="pre">DAE</span> <span class="pre">Tools</span> <span class="pre">Examples</span></tt> program to try some examples:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>GNU/Linux:</li>
</ul>
<blockquote>
<div><p>Run <tt class="docutils literal"><span class="pre">Applications/Programming/DAE</span> <span class="pre">Tools</span> <span class="pre">Examples</span></tt> from the system menu or execute the following shell command:</p>
<div class="highlight-bash"><div class="highlight"><pre>daeexamples
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>MacOS:</li>
</ul>
<blockquote>
<div><p>Execute the following shell command:</p>
<div class="highlight-bash"><div class="highlight"><pre>daeexamples
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>Windows:</li>
</ul>
<blockquote>
<div>Run <tt class="docutils literal"><span class="pre">Start/Programs/DAE</span> <span class="pre">Tools/DAE</span> <span class="pre">Tools</span> <span class="pre">Examples</span></tt> from the Start menu.</div></blockquote>
</div></blockquote>
<p>The main window of <tt class="docutils literal"><span class="pre">DAE</span> <span class="pre">Tools</span> <span class="pre">Examples</span></tt> application is given in <a class="reference internal" href="#figure-2a"><em>DAE Tools Examples main window</em></a> while
the output from the simulation run in <a class="reference internal" href="#figure-2b"><em>A typical optimization output from DAE Tools</em></a>. Users can select one of several tutorials,
run them, and inspect their source code or model reports.
Model reports open in a new window of the system&#8217;s default web browser (however, only Mozilla Firefox is currently
supported because of the MathML rendering issue).</p>
<div class="figure align-center" id="figure-2a" style="width: 400pt">
<img alt="_images/Screenshot-DAEToolsTutorials.png" src="_images/Screenshot-DAEToolsTutorials.png" style="width: 350pt;" />
<p class="caption">DAE Tools Examples main window</p>
</div>
<div class="figure align-center" id="figure-2b" style="width: 400pt">
<img alt="_images/Screenshot-DAEToolsTutorials-Run.png" src="_images/Screenshot-DAEToolsTutorials-Run.png" style="width: 350pt;" />
<p class="caption">A typical optimization output from DAE Tools</p>
</div>
<p>Tutorials can also be started from the shell:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /usr/local/lib/python2.7/dist-packages/daetools/examples
<span class="c"># Or in windows:</span>
<span class="c"># cd C:\PythonX.Y\Lib\site-packages\daetools\examples</span>

python tutorial1.py console
</pre></div>
</div>
<p>The sample output is given in <a class="reference internal" href="#figure-3"><em>Shell output from the simulation</em></a>:</p>
<div class="figure align-center" id="figure-3" style="width: 400pt">
<img alt="_images/Screenshot-RunningSimulation.png" src="_images/Screenshot-RunningSimulation.png" style="width: 350pt;" />
<p class="caption">Shell output from the simulation</p>
</div>
</div>
<div class="section" id="models">
<h2>5.2. Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<div class="section" id="developing-a-model">
<h3>5.2.1. Developing a model<a class="headerlink" href="#developing-a-model" title="Permalink to this headline">¶</a></h3>
<p>In <strong>DAE Tools</strong> models are developed by deriving a new class from the base model class (<a class="reference internal" href="core.html#pyCore.daeModel" title="pyCore.daeModel"><tt class="xref py py-class docutils literal"><span class="pre">daeModel</span></tt></a>).
The process consists of two steps:</p>
<ol class="arabic simple">
<li>Declare all domains, parameters, variables, ports etc.:<ul>
<li>In <strong>pyDAE</strong> declare and instantiate in the <a class="reference internal" href="core.html#pyCore.daeModel.__init__" title="pyCore.daeModel.__init__"><tt class="xref py py-meth docutils literal"><span class="pre">__init__()</span></tt></a> function</li>
<li>In <strong>cDAE</strong> declare as class data members and instantiate in the constructor</li>
</ul>
</li>
<li>Declare equations and state transition networks in the <a class="reference internal" href="core.html#pyCore.daeModel.DeclareEquations" title="pyCore.daeModel.DeclareEquations"><tt class="xref py py-meth docutils literal"><span class="pre">DeclareEquations()</span></tt></a> function</li>
</ol>
<p>An example model developed in <strong>pyDAE</strong> (using python programming language):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">myModel</span><span class="p">(</span><span class="n">daeModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">daeModel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

        <span class="c"># Declaration/instantiation of domains, parameters, variables, ports, etc:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span>     <span class="o">=</span> <span class="n">daeParameter</span><span class="p">(</span><span class="s">&quot;m&quot;</span><span class="p">,</span>       <span class="n">kg</span><span class="p">,</span>           <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Mass of the copper plate&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span>    <span class="o">=</span> <span class="n">daeParameter</span><span class="p">(</span><span class="s">&quot;c_p&quot;</span><span class="p">,</span>     <span class="n">J</span><span class="o">/</span><span class="p">(</span><span class="n">kg</span><span class="o">*</span><span class="n">K</span><span class="p">),</span>     <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Specific heat capacity of the plate&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">daeParameter</span><span class="p">(</span><span class="s">&quot;&amp;alpha;&quot;</span><span class="p">,</span> <span class="n">W</span><span class="o">/</span><span class="p">((</span><span class="n">m</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">K</span><span class="p">),</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Heat transfer coefficient&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">A</span>     <span class="o">=</span> <span class="n">daeParameter</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span>       <span class="n">m</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>         <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Area of the plate&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tsurr</span> <span class="o">=</span> <span class="n">daeParameter</span><span class="p">(</span><span class="s">&quot;T_surr&quot;</span><span class="p">,</span>  <span class="n">K</span><span class="p">,</span>            <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Temperature of the surroundings&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Qin</span>   <span class="o">=</span> <span class="n">daeVariable</span><span class="p">(</span><span class="s">&quot;Q_in&quot;</span><span class="p">,</span>  <span class="n">power_t</span><span class="p">,</span>       <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Power of the heater&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T</span>     <span class="o">=</span> <span class="n">daeVariable</span><span class="p">(</span><span class="s">&quot;T&quot;</span><span class="p">,</span>     <span class="n">temperature_t</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Temperature of the plate&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">DeclareEquations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Declaration of equations and state transitions:</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CreateEquation</span><span class="p">(</span><span class="s">&quot;HeatBalance&quot;</span><span class="p">,</span> <span class="s">&quot;Integral heat balance equation&quot;</span><span class="p">)</span>
        <span class="n">eq</span><span class="o">.</span><span class="n">Residual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">dt</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Qin</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">A</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tsurr</span><span class="p">())</span>
</pre></div>
</div>
<p>The same model developed in <strong>cDAE</strong> (using c++ programming language):</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">myModel</span> <span class="o">:</span> <span class="k">public</span> <span class="n">daeModel</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">// Declarations of domains, parameters, variables, ports, etc:</span>
    <span class="n">daeParameter</span> <span class="n">mass</span><span class="p">;</span>
    <span class="n">daeParameter</span> <span class="n">c_p</span><span class="p">;</span>
    <span class="n">daeParameter</span> <span class="n">alpha</span><span class="p">;</span>
    <span class="n">daeParameter</span> <span class="n">A</span><span class="p">;</span>
    <span class="n">daeParameter</span> <span class="n">T_surr</span><span class="p">;</span>
    <span class="n">daeVariable</span> <span class="n">Q_in</span><span class="p">;</span>
    <span class="n">daeVariable</span> <span class="n">T</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
    <span class="n">myModel</span><span class="p">(</span><span class="n">string</span> <span class="n">strName</span><span class="p">,</span> <span class="n">daeModel</span><span class="o">*</span> <span class="n">pParent</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">string</span> <span class="n">strDescription</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">daeModel</span><span class="p">(</span><span class="n">strName</span><span class="p">,</span> <span class="n">pParent</span><span class="p">,</span> <span class="n">strDescription</span><span class="p">),</span>

    <span class="c1">// Instantiation of domains, parameters, variables, ports, etc:</span>
    <span class="n">mass</span>  <span class="p">(</span><span class="s">&quot;m&quot;</span><span class="p">,</span>       <span class="n">kg</span><span class="p">,</span>            <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Mass of the copper plate&quot;</span><span class="p">),</span>
    <span class="n">c_p</span>   <span class="p">(</span><span class="s">&quot;c_p&quot;</span><span class="p">,</span>     <span class="n">J</span><span class="o">/</span><span class="p">(</span><span class="n">kg</span><span class="o">*</span><span class="n">K</span><span class="p">),</span>      <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Specific heat capacity of the plate&quot;</span><span class="p">),</span>
    <span class="n">alpha</span> <span class="p">(</span><span class="s">&quot;&amp;alpha;&quot;</span><span class="p">,</span> <span class="n">W</span><span class="o">/</span><span class="p">((</span><span class="n">m</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">K</span><span class="p">),</span> <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Heat transfer coefficient&quot;</span><span class="p">),</span>
    <span class="n">A</span>     <span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span>       <span class="n">m</span> <span class="o">^</span> <span class="mi">2</span><span class="p">,</span>         <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Area of the plate&quot;</span><span class="p">),</span>
    <span class="n">T_surr</span><span class="p">(</span><span class="s">&quot;T_surr&quot;</span><span class="p">,</span>  <span class="n">K</span><span class="p">,</span>             <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Temperature of the surroundings&quot;</span><span class="p">),</span>
    <span class="n">Q_in</span>  <span class="p">(</span><span class="s">&quot;Q_in&quot;</span><span class="p">,</span>    <span class="n">power_t</span><span class="p">,</span>       <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Power of the heater&quot;</span><span class="p">),</span>
    <span class="n">T</span>     <span class="p">(</span><span class="s">&quot;T&quot;</span><span class="p">,</span>       <span class="n">temperature_t</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="s">&quot;Temperature of the plate&quot;</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">DeclareEquations</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Declaration of equations and state transitions:</span>
        <span class="n">daeEquation</span><span class="o">*</span> <span class="n">eq</span> <span class="o">=</span> <span class="n">CreateEquation</span><span class="p">(</span><span class="s">&quot;HeatBalance&quot;</span><span class="p">,</span> <span class="s">&quot;Integral heat balance equation&quot;</span><span class="p">);</span>
        <span class="n">eq</span><span class="o">-&gt;</span><span class="n">SetResidual</span><span class="p">(</span> <span class="n">mass</span><span class="p">()</span> <span class="o">*</span> <span class="n">c_p</span><span class="p">()</span> <span class="o">*</span> <span class="n">T</span><span class="p">.</span><span class="n">dt</span><span class="p">()</span> <span class="o">-</span> <span class="n">Q_in</span><span class="p">()</span> <span class="o">+</span> <span class="n">alpha</span><span class="p">()</span> <span class="o">*</span> <span class="n">A</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="n">T</span><span class="p">()</span> <span class="o">-</span> <span class="n">T_surr</span><span class="p">())</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>More information about developing models can be found in <a class="reference internal" href="pyDAE_user_guide.html"><em>pyDAE User Guide</em></a> and <a class="reference internal" href="core.html#pyCore.daeModel" title="pyCore.daeModel"><tt class="xref py py-class docutils literal"><span class="pre">pyCore.daeModel</span></tt></a>.
Also, do not forget to have a look on <a class="reference internal" href="tutorials.html"><em>Tutorials</em></a>.</p>
</div>
</div>
<div class="section" id="simulation">
<h2>5.3. Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-a-simulation">
<h3>5.3.1. Setting up a simulation<a class="headerlink" href="#setting-up-a-simulation" title="Permalink to this headline">¶</a></h3>
<p>Definition of a simulation in <strong>DAE Tools</strong> requires the following steps:</p>
<ol class="arabic simple">
<li>Deriving a new simulation class from the base simulation class (<a class="reference internal" href="activity.html#pyActivity.daeSimulation" title="pyActivity.daeSimulation"><tt class="xref py py-class docutils literal"><span class="pre">daeSimulation</span></tt></a>)</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Specification of a model to be simulated</li>
<li>Setting the values of parameters</li>
<li>Fixing the degrees of freedom by assigning the values to certain variables</li>
<li>Setting the initial conditions for differential variables</li>
<li>Setting the other variables&#8217; information: initial guesses, absolute tolerances, etc</li>
<li>Specifation of an operating procedure. It can be either a simple run for a specified period of time (default) or
a complex one where various actions can be taken during the simulation</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Specify DAE and LA solvers</li>
<li>Specify a data reporter and a data receiver, and connect them</li>
<li>Set a time horizon, reporting interval, etc</li>
<li>Do the initialization of the DAE system</li>
<li>Save model report and/or runtime model report (to inspect expanded equations etc)</li>
<li>Run the simulation</li>
</ol>
<p>An example simulation developed in <strong>pyDAE</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">mySimulation</span><span class="p">(</span><span class="n">daeSimulation</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">daeSimulation</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># Set the model to simulate:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">myModel</span><span class="p">(</span><span class="s">&quot;myModel&quot;</span><span class="p">,</span> <span class="s">&quot;Description&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">SetUpParametersAndDomains</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Set the parameters values:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">cp</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">385</span> <span class="o">*</span> <span class="n">J</span><span class="o">/</span><span class="p">(</span><span class="n">kg</span><span class="o">*</span><span class="n">K</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="n">kg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">alpha</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">200</span> <span class="o">*</span> <span class="n">W</span><span class="o">/</span><span class="p">((</span><span class="n">m</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">K</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">*</span> <span class="n">m</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">Tsurr</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">283</span> <span class="o">*</span> <span class="n">K</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">SetUpVariables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Set the degrees of freedom, initial conditions, initial guesses, etc.:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">Qin</span><span class="o">.</span><span class="n">AssignValue</span><span class="p">(</span><span class="mi">1500</span> <span class="o">*</span> <span class="n">W</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">SetInitialCondition</span><span class="p">(</span><span class="mi">283</span> <span class="o">*</span> <span class="n">K</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># A custom operating procedure, if needed.</span>
        <span class="c"># Here we use the default one:</span>
        <span class="n">daeSimulation</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>The same simulation in <strong>cDAE</strong>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">mySimulation</span> <span class="o">:</span> <span class="k">public</span> <span class="n">daeSimulation</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">myModel</span> <span class="n">m</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
    <span class="n">mySimulation</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="o">:</span> <span class="n">m</span><span class="p">(</span><span class="s">&quot;myModel&quot;</span><span class="p">,</span> <span class="s">&quot;Description&quot;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Set the model to simulate:</span>
        <span class="n">SetModel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m</span><span class="p">);</span>
    <span class="p">}</span>

<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">SetUpParametersAndDomains</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Set the parameters values:</span>
        <span class="n">model</span><span class="p">.</span><span class="n">c_p</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">385</span> <span class="o">*</span> <span class="n">J</span><span class="o">/</span><span class="p">(</span><span class="n">kg</span><span class="o">*</span><span class="n">K</span><span class="p">));</span>
        <span class="n">model</span><span class="p">.</span><span class="n">mass</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="n">kg</span><span class="p">);</span>
        <span class="n">model</span><span class="p">.</span><span class="n">alpha</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">200</span> <span class="o">*</span> <span class="n">W</span><span class="o">/</span><span class="p">((</span><span class="n">m</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">K</span><span class="p">));</span>
        <span class="n">model</span><span class="p">.</span><span class="n">A</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">m</span><span class="o">^</span><span class="mi">2</span><span class="p">));</span>
        <span class="n">model</span><span class="p">.</span><span class="n">T_surr</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">283</span> <span class="o">*</span> <span class="n">K</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">SetUpVariables</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Set the degrees of freedom, initial conditions, initial guesses, etc.:</span>
        <span class="n">model</span><span class="p">.</span><span class="n">Q_in</span><span class="p">.</span><span class="n">AssignValue</span><span class="p">(</span><span class="mi">1500</span> <span class="o">*</span> <span class="n">W</span><span class="p">);</span>
        <span class="n">model</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">SetInitialCondition</span><span class="p">(</span><span class="mi">283</span> <span class="o">*</span> <span class="n">K</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Run</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// A custom operating procedure, if needed.</span>
        <span class="c1">// Here we use the default one:</span>
        <span class="n">daeSimulation</span><span class="o">::</span><span class="n">Run</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Simulations in <strong>pyDAE</strong> can be set-up to run in two modes:</p>
<ol class="arabic simple">
<li>From th PyQt4 graphical user interface (<strong>pyDAE</strong> only):</li>
</ol>
<blockquote>
<div><p>Here the default log, and data reporter objects will be used, while the user can choose DAE and LA solvers and
specify time horizon and reporting interval.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import modules</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">localtime</span><span class="p">,</span> <span class="n">strftime</span>
<span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>

<span class="c"># Create QtApplication object</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="c"># Create simulation object</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">mySimulation</span><span class="p">()</span>

<span class="c"># Report ALL variables in the model</span>
<span class="n">sim</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">SetReportingOn</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Show the daeSimulator window to choose the other information needed for simulation</span>
<span class="n">simulator</span>  <span class="o">=</span> <span class="n">daeSimulator</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="n">sim</span><span class="p">)</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c"># Execute applications main loop</span>
<span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>From the shell:</li>
</ol>
<blockquote>
<div><p>In <strong>pyDAE</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import modules</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">localtime</span><span class="p">,</span> <span class="n">strftime</span>

<span class="c"># Create Log, Solver, DataReporter and Simulation object</span>
<span class="n">log</span>          <span class="o">=</span> <span class="n">daeStdOutLog</span><span class="p">()</span>
<span class="n">solver</span>       <span class="o">=</span> <span class="n">daeIDAS</span><span class="p">()</span>
<span class="n">datareporter</span> <span class="o">=</span> <span class="n">daeTCPIPDataReporter</span><span class="p">()</span>
<span class="n">simulation</span>   <span class="o">=</span> <span class="n">mySimulation</span><span class="p">()</span>

<span class="c"># Report ALL variables in the model</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">SetReportingOn</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Set the time horizon (1000 seconds) and the reporting interval (10 seconds)</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">SetReportingInterval</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">SetTimeHorizon</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c"># Connect data reporter (use the default TCP/IP connection settings: localhost and 50000 port)</span>
<span class="n">simName</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">Name</span> <span class="o">+</span> <span class="n">strftime</span><span class="p">(</span><span class="s">&quot; [m.%Y %H:%M:%S]&quot;</span><span class="p">,</span> <span class="n">localtime</span><span class="p">())</span>
<span class="k">if</span><span class="p">(</span><span class="n">datareporter</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">simName</span><span class="p">)</span> <span class="o">==</span> <span class="bp">False</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

<span class="c"># Initialize the simulation</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">Initialize</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">datareporter</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>

<span class="c"># Solve at time = 0 (initialization)</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">SolveInitial</span><span class="p">()</span>

<span class="c"># Run</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>

<span class="c"># Clean up</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">Finalize</span><span class="p">()</span>
</pre></div>
</div>
<p>In <strong>cDAE</strong>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="c1">// Create Log, Solver, DataReporter and Simulation object</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeSimulation_t</span><span class="o">&gt;</span>    <span class="n">pSimulation</span><span class="p">(</span><span class="k">new</span> <span class="n">mySimulation</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeDataReporter_t</span><span class="o">&gt;</span>  <span class="n">pDataReporter</span><span class="p">(</span><span class="n">daeCreateTCPIPDataReporter</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeIDASolver</span><span class="o">&gt;</span>       <span class="n">pDAESolver</span><span class="p">(</span><span class="n">daeCreateIDASolver</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeLog_t</span><span class="o">&gt;</span>           <span class="n">pLog</span><span class="p">(</span><span class="n">daeCreateStdOutLog</span><span class="p">());</span>

<span class="c1">// Report ALL variables in the model</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">GetModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetReportingOn</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="c1">// Set the time horizon (1000 seconds) and the reporting interval (10 seconds)</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">SetReportingInterval</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">SetTimeHorizon</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

<span class="c1">// Connect data reporter (use the default TCP/IP connection settings: localhost and 50000 port)</span>
<span class="n">string</span> <span class="n">strName</span> <span class="o">=</span> <span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">GetModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">pDataReporter</span><span class="o">-&gt;</span><span class="n">Connect</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">strName</span><span class="p">))</span>
    <span class="k">return</span><span class="p">;</span>

<span class="c1">// Initialize the simulation</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">Initialize</span><span class="p">(</span><span class="n">pDAESolver</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">pDataReporter</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">pLog</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

<span class="c1">// Solve at time = 0 (initialization)</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">SolveInitial</span><span class="p">();</span>

<span class="c1">// Run</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">Run</span><span class="p">();</span>

<span class="c1">// Clean up</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">Finalize</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="running-a-simulation">
<h3>5.3.2. Running a simulation<a class="headerlink" href="#running-a-simulation" title="Permalink to this headline">¶</a></h3>
<p>Simulations are started by executing the following shell commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> <span class="s2">&quot;directory where simulation file is located&quot;</span>
python mySimulation.py
</pre></div>
</div>
</div>
</div>
<div class="section" id="optimization">
<h2>5.4. Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-an-optimization">
<h3>5.4.1. Setting up an optimization<a class="headerlink" href="#setting-up-an-optimization" title="Permalink to this headline">¶</a></h3>
<p>To define an optimization problem it is first necessary to develop a model of the process and to define
a simulation (as explained above). Having done these tasks (working model and simulation) the optimization
in <strong>DAE Tools</strong> can be defined by specifying the objective function, optimization variables and optimization
constraints. It is intentionally chosen to keep simulation and optimization tightly coupled. The optimization
problem should be specified in the function <a class="reference internal" href="activity.html#pyActivity.daeSimulation.SetUpOptimization" title="pyActivity.daeSimulation.SetUpOptimization"><tt class="xref py py-meth docutils literal"><span class="pre">SetUpOptimization()</span></tt></a>.</p>
<p>Definition of an optimization in <strong>DAE Tools</strong> requires the following steps:</p>
<ol class="arabic simple">
<li>Specify the objective function</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Objective function is defined by specifying its residual (similarly to specifying an equation residual);
Internally the framework will create a new variable (V_obj) and a new equation (F_obj).</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Specify optimization variables</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>The optimization variables have to be already defined in the model and their values assigned in the simulation;
they can be either non-distributed or distributed.</li>
<li>Specify a type of optimization variable values. The variables can be <tt class="docutils literal"><span class="pre">continuous</span></tt> (floating point values in
the given range), <tt class="docutils literal"><span class="pre">integer</span></tt> (set of integer values in the given range) or <tt class="docutils literal"><span class="pre">binary</span></tt> (integer value: 0 or 1).</li>
<li>Specify the starting point (within the range)</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Specify optimization constraints</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Two types of constraints exist in DAE Tools: <tt class="docutils literal"><span class="pre">equality</span></tt> and <tt class="docutils literal"><span class="pre">inequality</span></tt> constraints
To define an <tt class="docutils literal"><span class="pre">equality</span></tt> constraint its residual and the value has to be specified;
To define an <tt class="docutils literal"><span class="pre">inequality</span></tt> constraint its residual, the lower and upper bounds have to be specified;
Internally the framework will create a new variable (V_constraint[N]) and a new equation (F_constraint[N])
for each defined constraint, where N is the ordinal number of the constraint.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Specify NLP/MINLP solver</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Currently BONMIN MINLP solver and IPOPT and NLOPT solvers are supported (the BONMIN
solver internally uses IPOPT to solve NLP problems)</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Specify DAE and LA solvers</li>
<li>Specify a data reporter and a data receiver, and connect them</li>
<li>Set a time horizon, reporting interval, etc</li>
<li>Set the options of the (MI)NLP solver</li>
<li>Initialize the optimization</li>
<li>Save model report and/or runtime model report (to inspect expanded equations etc)</li>
<li>Run the optimization</li>
</ol>
<p><a class="reference internal" href="activity.html#pyActivity.daeSimulation.SetUpOptimization" title="pyActivity.daeSimulation.SetUpOptimization"><tt class="xref py py-meth docutils literal"><span class="pre">SetUpOptimization()</span></tt></a> function should be declared in the simulation class:</p>
<p>In <strong>pyDAE</strong>:
.. code-block:: python</p>
<blockquote>
<div><dl class="docutils">
<dt>class mySimulation(daeSimulation):</dt>
<dd><p class="first">...</p>
<dl class="last docutils">
<dt>def SetUpOptimization(self):</dt>
<dd># Declarations of the obj. function, opt. variables and constraints:</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>In <strong>cDAE</strong>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">mySimulation</span> <span class="o">:</span> <span class="k">public</span> <span class="n">daeSimulation</span>
<span class="p">{</span>
    <span class="p">...</span>

    <span class="kt">void</span> <span class="n">SetUpOptimization</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Declarations of the obj. function, opt. variables and constraints:</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Optimizations, like simulations can be set-up to run in two modes:</p>
<ol class="arabic simple">
<li>From the PyQt4 graphical user interface (<strong>pyDAE</strong> only)</li>
</ol>
<blockquote>
<div><p>Here the default log, and data reporter objects will be used, while the user can choose NLP, DAE and LA solvers and
specify time horizon and reporting interval:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import modules</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">localtime</span><span class="p">,</span> <span class="n">strftime</span>
<span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>

<span class="c"># Create QtApplication object</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="c"># Create simulation object</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">mySimulation</span><span class="p">()</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">daeBONMIN</span><span class="p">()</span>

<span class="c"># Report ALL variables in the model</span>
<span class="n">sim</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">SetReportingOn</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Show the daeSimulator window to choose the other information needed for optimization</span>
<span class="n">simulator</span> <span class="o">=</span> <span class="n">daeSimulator</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="n">sim</span><span class="p">,</span> <span class="n">nlpsolver</span><span class="o">=</span><span class="n">nlp</span><span class="p">)</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c"># Execute applications main loop</span>
<span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>From the shell:</li>
</ol>
<blockquote>
<div><p>In <strong>pyDAE</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create Log, NLPSolver, DAESolver, DataReporter, Simulation and Optimization objects</span>
<span class="n">log</span>          <span class="o">=</span> <span class="n">daePythonStdOutLog</span><span class="p">()</span>
<span class="n">daesolver</span>    <span class="o">=</span> <span class="n">daeIDAS</span><span class="p">()</span>
<span class="n">nlpsolver</span>    <span class="o">=</span> <span class="n">daeBONMIN</span><span class="p">()</span>
<span class="n">datareporter</span> <span class="o">=</span> <span class="n">daeTCPIPDataReporter</span><span class="p">()</span>
<span class="n">simulation</span>   <span class="o">=</span> <span class="n">mySimulation</span><span class="p">()</span>
<span class="n">optimization</span> <span class="o">=</span> <span class="n">daeOptimization</span><span class="p">()</span>

<span class="c"># Enable reporting of all variables</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">SetReportingOn</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Set the time horizon and the reporting interval</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">ReportingInterval</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">simulation</span><span class="o">.</span><span class="n">TimeHorizon</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c"># Connect data reporter</span>
<span class="n">simName</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">Name</span> <span class="o">+</span> <span class="n">strftime</span><span class="p">(</span><span class="s">&quot; [m.%Y %H:%M:%S]&quot;</span><span class="p">,</span> <span class="n">localtime</span><span class="p">())</span>
<span class="k">if</span><span class="p">(</span><span class="n">datareporter</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">simName</span><span class="p">)</span> <span class="o">==</span> <span class="bp">False</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

<span class="c"># Initialize the opimization</span>
<span class="n">optimization</span><span class="o">.</span><span class="n">Initialize</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">nlpsolver</span><span class="p">,</span> <span class="n">daesolver</span><span class="p">,</span> <span class="n">datareporter</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>

<span class="c"># Run</span>
<span class="n">optimization</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>

<span class="c"># Clean up</span>
<span class="n">optimization</span><span class="o">.</span><span class="n">Finalize</span><span class="p">()</span>
</pre></div>
</div>
<p>In <strong>cDAE</strong>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="c1">// Create Log, NLPSolver, DAESolver, DataReporter, Simulation and Optimization objects</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeSimulation_t</span><span class="o">&gt;</span>        <span class="n">pSimulation</span><span class="p">(</span><span class="k">new</span> <span class="n">mySimulation</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeDataReporter_t</span><span class="o">&gt;</span>      <span class="n">pDataReporter</span><span class="p">(</span><span class="n">daeCreateTCPIPDataReporter</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeIDASolver</span><span class="o">&gt;</span>           <span class="n">pDAESolver</span><span class="p">(</span><span class="n">daeCreateIDASolver</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeLog_t</span><span class="o">&gt;</span>               <span class="n">pLog</span><span class="p">(</span><span class="n">daeCreateStdOutLog</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeNLPSolver_t</span><span class="o">&gt;</span>         <span class="n">pNLPSolver</span><span class="p">(</span><span class="k">new</span> <span class="n">daeBONMINSolver</span><span class="p">());</span>
<span class="n">boost</span><span class="o">::</span><span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">daeOptimization_t</span><span class="o">&gt;</span>      <span class="n">pOptimization</span><span class="p">(</span><span class="k">new</span> <span class="n">daeOptimization</span><span class="p">());</span>

<span class="c1">// Report ALL variables in the model</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">GetModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetReportingOn</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="c1">// Set the time horizon and the reporting interval</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">SetReportingInterval</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">SetTimeHorizon</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

<span class="c1">// Connect data reporter</span>
<span class="n">string</span> <span class="n">strName</span> <span class="o">=</span> <span class="n">pSimulation</span><span class="o">-&gt;</span><span class="n">GetModel</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">pDataReporter</span><span class="o">-&gt;</span><span class="n">Connect</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">strName</span><span class="p">))</span>
    <span class="k">return</span><span class="p">;</span>

<span class="c1">// Initialize the optimization</span>
<span class="n">pOptimization</span><span class="o">-&gt;</span><span class="n">Initialize</span><span class="p">(</span><span class="n">pSimulation</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
                          <span class="n">pNLPSolver</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
                          <span class="n">pDAESolver</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
                          <span class="n">pDataReporter</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span>
                          <span class="n">pLog</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

<span class="c1">// Run</span>
<span class="n">pOptimization</span><span class="p">.</span><span class="n">Run</span><span class="p">();</span>

<span class="c1">// Clean up</span>
<span class="n">pOptimization</span><span class="p">.</span><span class="n">Finalize</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<p>More information about simulation can be found in <a class="reference internal" href="pyDAE_user_guide.html"><em>pyDAE User Guide</em></a> and <a class="reference internal" href="activity.html#pyActivity.daeOptimization" title="pyActivity.daeOptimization"><tt class="xref py py-class docutils literal"><span class="pre">daeOptimization</span></tt></a>.
Also, do not forget to have a look on <a class="reference internal" href="tutorials.html"><em>Tutorials</em></a>.</p>
</div>
<div class="section" id="starting-an-optimization">
<h3>5.4.2. Starting an optimization<a class="headerlink" href="#starting-an-optimization" title="Permalink to this headline">¶</a></h3>
<p>Starting the optimization problems is analogous to running a simulation.</p>
</div>
</div>
<div class="section" id="processing-the-results">
<h2>5.5. Processing the results<a class="headerlink" href="#processing-the-results" title="Permalink to this headline">¶</a></h2>
<p>The simulation/optimization results can be easily plotted by using <strong>DAE Plotter</strong> application.
It is possible to choose between 2D and 3D plots. After choosing a desired type, a <strong>Choose variable</strong>
(given in <a class="reference internal" href="#figure-5"><em>Choose variable dialog for a 2D plot</em></a>) dialog appears where a variable to be plotted can be selected and information
about domains specified - some domains should be fixed while leaving another free by selecting <tt class="docutils literal"><span class="pre">*</span></tt> from the list
(to create a 2D plot one domain must remain free, while for a 3D plot two domains).</p>
<div class="figure align-center" id="figure-5" style="width: 400pt">
<img alt="_images/Screenshot-ChooseVariable.png" src="_images/Screenshot-ChooseVariable.png" style="width: 350pt;" />
<p class="caption">Choose variable dialog for a 2D plot</p>
</div>
<p>Typical 2D and 3D plots are given in <a class="reference internal" href="#figure-6"><em>Example 2D plot (produced by Matplotlib)</em></a> and <a class="reference internal" href="#figure-7"><em>Example 3D plot (produced by Mayavi2)</em></a>.</p>
<div class="figure align-center" id="figure-6" style="width: 400pt">
<img alt="_images/Screenshot-2Dplot.png" src="_images/Screenshot-2Dplot.png" style="width: 350pt;" />
<p class="caption">Example 2D plot (produced by Matplotlib)</p>
</div>
<div class="figure align-center" id="figure-7" style="width: 400pt">
<img alt="_images/Screenshot-3Dplot.png" src="_images/Screenshot-3Dplot.png" style="width: 350pt;" />
<p class="caption">Example 3D plot (produced by Mayavi2)</p>
</div>
<img alt="" src="http://sourceforge.net/apps/piwik/daetools/piwik.php?idsite=1&amp;amp;rec=1&amp;amp;url=wiki/" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/[d][a][e]_Tools_project.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Getting Started with DAE Tools</a><ul>
<li><a class="reference internal" href="#running-tutorials">5.1. Running tutorials</a></li>
<li><a class="reference internal" href="#models">5.2. Models</a><ul>
<li><a class="reference internal" href="#developing-a-model">5.2.1. Developing a model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simulation">5.3. Simulation</a><ul>
<li><a class="reference internal" href="#setting-up-a-simulation">5.3.1. Setting up a simulation</a></li>
<li><a class="reference internal" href="#running-a-simulation">5.3.2. Running a simulation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimization">5.4. Optimization</a><ul>
<li><a class="reference internal" href="#setting-up-an-optimization">5.4.1. Setting up an optimization</a></li>
<li><a class="reference internal" href="#starting-an-optimization">5.4.2. Starting an optimization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#processing-the-results">5.5. Processing the results</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="getting_daetools.html"
                        title="previous chapter">4. Getting DAE Tools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pyDAE_user_guide.html"
                        title="next chapter">6. pyDAE User Guide</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getting_started.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyDAE_user_guide.html" title="6. pyDAE User Guide"
             >next</a> |</li>
        <li class="right" >
          <a href="getting_daetools.html" title="4. Getting DAE Tools"
             >previous</a> |</li>
        <li><a href="index.html">DAE Tools Project 1.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2013, Dragan Nikolic.
      Last updated on May 22, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>